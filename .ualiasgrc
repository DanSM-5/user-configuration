#!/usr/bin/env bash

######################################
#           GENERAL ALIAS            #
######################################

# Follow structure conf folders and files
export user_conf_path="$HOME/.usr_conf/.uconfrc"
export user_scripts_path="$HOME/user-scripts"
export prj="$HOME/prj"

alias gpr="cd $prj"
alias gus="cd $user_scripts_path"
alias guc="cd $HOME/.usr_conf"
alias gvc="cd $HOME/.SpaceVim.d"
alias goh="cd $HOME"

export uprf="$HOME/.profile"
uconf="$HOME/.usr_conf/.uconfrc"
uconfg="$HOME/.usr_conf/.uconfgrc"
ualias="$HOME/.usr_conf/.ualiasrc"
ualiasg="$HOME/.usr_conf/.ualiasgrc"

alias epf="vim $HOME/.profile"
alias ecf="vim $uconf"
alias egc="vim $uconfg"
alias eal="vim $ualias"
alias ega="vim $ualiasg"
alias evc="vim $HOME/.SpaceVim.d/init.toml"

# Git
alias glg="git log --oneline --decorate --graph"
alias glga="git log --oneline --all --decorate --graph"
alias gcommit="git commit -m"
alias gcomm="git commit"
alias gfetch="git fetch"
alias gpull="git pull"
alias gupdate="git fetch && git pull"
alias gpush="git push"
alias gadd="git add"
alias gck="git checkout"
alias grm="git checkout -- ."
alias gstatus="git status"
alias gs="git status"
alias gamend="git commit --amend"
alias gdif="git diff"
alias gstash="git stash"
alias gsl="git stash list"
alias gsa="git stash apply"
alias gspop="git stash pop"
alias gsp="git stash push -m"
alias gss="git stash show"
alias gsd="git stash drop"
alias gprev="git diff HEAD^..HEAD"
gprevd () {
  local limit="$1"

  # Default to limit of 1
  if [ -z "$limit" ] || [ "$limit" -le 0 ]; then
    limit=1
  fi

  git diff HEAD~"$limit"..HEAD
}

# General commands
alias start="explorer.exe"
alias mkdr="mkdir -pv"
alias ll="ls -lah"

# Sys Alias
alias aptup="sudo apt-get update && sudo apt-get upgrade" 
alias aptupd="sudo apt-get update"
alias aptupg="sudo apt-get upgrade"
alias aptin="sudo apt-get install"
alias aptrm="sudo apt-get remove"

# Node & NPM
alias npm-list="npm list -g --dept=0"

# Navigation
alias ..="cd .."
alias ...="cd ../.."

# Nav up n directories
up () {
  local d=""
  local limit="$1"

  # Default to limit of 1
  if [ -z "$limit" ] || [ "$limit" -le 0 ]; then
    limit=1
  fi

  for (( i=1; i<=limit; i++ )); do
    d="../$d"
  done

  # perdorm cd. Show error if cd fails
  if ! cd "$d"; then
    echo "Couldn't go up $limit dirs."
  fi
}

# Sourcing
alias spf="source $HOME/.profile"
alias scfg="source $HOME/.usr_conf/.uconfrc"
alias sgcf="source $HOME/.usr_conf/.uconfgrc"
alias sals="source $HOME/.usr_conf/.ualiasrc"
alias sgal="source $HOME/.usr_conf/.ualiasgrc"

alias psh="powershell.exe"
alias pwsh="pwsh.exe"
alias cps="pwsh.exe -nolo -nopro -nonin -c"

# Trim utilities
nospace () {
  tr -d "[:space:]"
}

ltrim () {
  sed -E 's/^[[:space:]]*//'
}

rtrim () {
  sed -E 's/[[:space:]]*$//'
}

trim () {
  ltrim | rtrim
}

# Open temp file on vim
ntemp () {
  vim "/temp/temp-$(uuidgen 2>/dev/null || date +%d-%m-%Y_%H-%M-%S).txt"
}

# extract files
ex () {
  if [ -f "$1" ]; then
    case $1 in
      *.tar.bz2)    tar xjvf $1;;
      *.tar.gz)     tar xzvf $1;;
      *.bz2)        bunzip2 $1;;
      *.rar)        unrar x $1;;
      *.gz)         gunzip $1;;
      *.tar)        tar xvf $1;;
      *.tbz2)       tar xjvf $1;;
      *.tgz)        tar xzvf $1;;
      *.zip)        unzip $1;;
      *.Z)          uncompress $1;;
      *.7z)         7z x $1;;
      *.deb)        ar x $1;;
      *.tar.xz)     tar xvf $1;;
      *.tar.zst)    unzstd $1;;
      *)            echo "'$1' cannot be extracted via ex()!";;
    esac
  else
    echo "'$1' is not a file"
  fi
}

# If path issues, add VS Code path manually
# export PATH="${WIN_HOME}/AppData/Local/Programs/Microsoft VS Code/bin:$PATH"

# Dependencies
# export PATH="$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

